
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>Project Euler: Level 2 | Ryland Herrick</title>

	<meta name="author" content="Ryland Herrick">

<meta name="description" content="Spent the day attempting contact with people who didn&rsquo;t want to communicate with me. Filed my state taxes (had done federal a week or so ago). &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Ryland Herrick" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">Ryland Herrick</a></h1>
<span class="tagline">is a developer.</span>
<nav id="main-nav"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="mailto:ryalnd@gmail.com">Contact</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="mailto:ryalnd@gmail.com">Contact</a></li>
</ul>
</div>
	</div>
</nav>


</header>

	<div id="content" class="inner"><article class="post">
	<header>
		<h2 class="title">Project Euler: Level 2</h2>
		<div class="meta date">








  


<time datetime="2011-02-25T18:51:27-08:00" pubdate data-updated="true">Feb 25<span>th</span>, 2011</time></div>
	</header>
	<div class="entry-content"><p>Spent the day attempting contact with people who didn&rsquo;t want to communicate with me.  Filed my state taxes (had done federal a week or so ago).</p>

<p>I couldn&rsquo;t decide whether to feel good about today&rsquo;s productivity or not, so to add some weight to the &lsquo;productive&rsquo; side, I went ahead and finished the remaining 7 PE problems needed to get me to the coveted <strong>Level 2</strong>.</p>

<p>In case you were wondering, and for posterity,  those problems were: <a href="http://projecteuler.net/index.php?section=problems&amp;id=33">33</a>, <a href="http://projecteuler.net/index.php?section=problems&amp;id=53">53</a>, <a href="http://projecteuler.net/index.php?section=problems&amp;id=41">41</a>, <a href="http://projecteuler.net/index.php?section=problems&amp;id=56">56</a>, <a href="http://projecteuler.net/index.php?section=problems&amp;id=97">97</a>, <a href="http://projecteuler.net/index.php?section=problems&amp;id=55">55</a>, and <a href="http://projecteuler.net/index.php?section=problems&amp;id=79">79</a>.  Problem 79 was by far the most interesting; I even ended up doing some OOP with Python for the first time.</p>

<p><strong>Quick summary:</strong></p>

<p>33: Was only getting three of the four fractions initially due my incorrectly assuming that the pre-canceled denominator was going to be a whole multiple of the numerator: 26/65 did not fit that mold.</p>

<p>53: The only issue here was parsing the actual problem syntax.  Thanks again, Professor Ono (my combinatorics prof.)</p>

<p>41: Although I haven&rsquo;t mentioned it before, I wrote a Sieve of Eratosthenes-like function for (really) quickly computing primes up to a certain number when I first started PE.  I once again used that here, and filtered that list down to pandigitals.  I won&rsquo;t say the answer, but I do want to mention the fact that it was 7-digits, due to the fact that the sums from 1 to 8 and 9 are 36 and 45, respectively, and so are always divisible by 3 (thanks to that nice rule for divisibility by 3).</p>

<p>56: Pretty much exactly how you&rsquo;d first think to do it.</p>

<p>97:  Ended up using Python&rsquo;s built-in pow() function, taking full advantage of its optional modulo argument to limit the result (and calculations) to only those last ten digits.  Other than that, completely straightforward.</p>

<p>55: Easier to just show this one.  Used a recursive function and the limits the explicitly stated.</p>

<div><script src='https://gist.github.com/2019414.js?file=euler_55.py'></script>
<noscript><pre><code>def lychrel(n, it):
    if it&lt;50:
        rev = n[::-1]
        _sum = str(int(n) + int(rev))
        if _sum==_sum[::-1]:
            return int(_sum)
        else: return lychrel(_sum, it+1)
    else: return 0

l = [x for x in range(1,10000) if not lychrel(str(x),0)]
print len(l)</code></pre></noscript></div>


<p>Problem 79 was the most interesting.  I just finished.  I made two related assumptions, without which my answer probably wouldn&rsquo;t work. I also cheated a bit and ended up explicitly telling the program which numbers were used in the password, although I could&rsquo;ve easily made that list from the input as well.</p>

<p>I ended up using a Python class in the same way you&rsquo;d use a C struct, in this case to associate two sets to each digit used in the password: one representing all the numbers that appeared to the left of that digit in those logins, and the other representing those that appeared to the right of it.  Here&rsquo;s where those assumptions I mentioned earlier came in:  I assumed that each digit was only present in the password once, and that there were no conflicting orderings (e.g. 6 appearing both to the left and right of a digit x in different login attempts, which would imply that x appears more than once in the password).</p>

<p>I ran my program and took a look at the lists, and saw that in this case my assumptions were correct.  Then I simply ordered those digits based on the lengths of their &lsquo;left&rsquo; sets (So the digit with nothing to the left of it would be first, and the digit with everything else to the left of it would be last.  Get it?).  Voila.  Code:</p>

<div><script src='https://gist.github.com/2019414.js?file=euler_79.py'></script>
<noscript><pre><code>class digit:
    def __init__(self,x):
        self.dig = x
        self.left = set()
        self.right = set()

#split the input into a list of 3-digit login attempts
logins = list(set([l.strip('\n\r') for l in open('keylog.txt')]))

#compile key's left and right sets
def place(key):
    num = str(key.dig)
    check = [line for line in logins if num in line]
    for line in check: #for each line that contains this digit
        place = line.index(num)
        for i in line:
            if line.index(i) &lt; place:
                key.left.add(i)
            elif line.index(i) &gt;place:
                key.right.add(i)

#create an instance for each digit present
obs = [digit(l) for l in ['0','1','2','3','6','7','8','9']]
#create those instances' associated sets
[place(dig) for dig in obs]

#place in logical order
obs.sort(key=lambda x: x.left)


'''
SORT V0
for i in range(9):
    for dig in obs:
        if len(dig.left)==i:
            print dig.dig
SORT V1
print [dig.dig for i in range(9) for dig in obs if len(dig.left)==i]
'''
print ''.join([d.dig for d in obs])
print reduce(lambda x,y: x+y,[d.dig for d in obs])</code></pre></noscript></div>


<p>Commented out near the bottom you&rsquo;ll see two previous methods I had used to do the final sorting mentioned above.  V0 had nested loops, which wasn&rsquo;t awful but not good; V1 was essentially just a list comprehension of same.  I tried to be a bit more &lsquo;pythonic&rsquo; with my final method, using lambda function within the list.sort() method to order the list of &lsquo;digit&rsquo; instances on their left set.</p>

<p>The last two lines produce the same string, but I wanted to show both approaches. The first is the preferred, pythonic, and much faster way.  The second is essentially the same as calling <code>print reduce(operator.add, [d.dig for d in obs])</code>.</p>

<p>which is exactly what Python&rsquo;s built-in <code>sum()</code> function does.   However Python will (purposely) throw an exception if you try to use <code>sum()</code> on a list of strings, apparently because they don&rsquo;t want you doing that (although, as I showed, lambdas are a way around that).</p>

<p>A more thorough explanation of the above can be found on Stack Overflow (<a href="http://stackoverflow.com/questions/3525359/python-sum-why-not-strings">link</a>).</p>

<p>It&rsquo;s official. I really like Python.</p>
</div>
	

</article>

	
	<div class="share">
		<ul>
			<li>
  <a href="https://twitter.com/intent/tweet?text=Project Euler: Level 2 by @rylnd&url=http://rylnd.github.com/blog/2011/02/25/project-euler-level-2/" title="Share Project Euler: Level 2 on Twitter">
    <img src="/images/social/twitter.png" />
  </a>
</li>

			<li>
  <a href="https://www.facebook.com/sharer.php?u=http://rylnd.github.com/blog/2011/02/25/project-euler-level-2/" title="Share Project Euler: Level 2 on Facebook">
    <img src="/images/social/facebook.png" />
  </a>
</li>

			<li>
  <a href="https://plus.google.com/share?url=http://rylnd.github.com/blog/2011/02/25/project-euler-level-2/" title="Share Project Euler: Level 2 on Google Plus">
    <img src="/images/social/google.png" />
  </a>
</li>

		</ul>
	</div>



</div>
	<footer id="footer" class="inner"><div class='social'>
  

  

  
  <a class="twitter" href="http://twitter.com/rylnd" t
    tle="Twitter">Twitter</a>
  

  
  <a class="github" href="https://github.com/rylnd" title="GitHub">GitHub</a>
  

  
  <a class="coderwall" href="https://coderwall.com/rylnd" title="Coderwall">Coderwall</a>
  

  

  
  <a class="rss" href="/atom.xml" title="RSS">RSS</a>
  
</div>

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/hyphenator.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'ry-land';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-20884325-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




</body>
</html>
