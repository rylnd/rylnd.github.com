<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: git | Ryland Herrick]]></title>
  <link href="http://rylnd.github.com/blog/categories/git/atom.xml" rel="self"/>
  <link href="http://rylnd.github.com/"/>
  <updated>2013-06-16T04:24:06-05:00</updated>
  <id>http://rylnd.github.com/</id>
  <author>
    <name><![CDATA[Ryland Herrick]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Homebrew and Git]]></title>
    <link href="http://rylnd.github.com/blog/2013/01/17/homebrew-and-git/"/>
    <updated>2013-01-17T19:20:00-06:00</updated>
    <id>http://rylnd.github.com/blog/2013/01/17/homebrew-and-git</id>
    <content type="html"><![CDATA[<p>I recently had an issue installing git with homebrew, and want to share the solution.</p>

<p>The version of git (1.7.5.4) that XCode had installed for me was working just fine, but I wanted the shiny new one.</p>

<p>Here&rsquo;s what I was seeing:</p>

<pre><code>$ brew install git
...
==&gt; make prefix=/usr/local/Cellar/git/1.8.1.1 CC=/usr/bin/gcc-4.2 CFLAGS=-Os -w -pipe -march=core2 -msse4 -mmacosx-version-min=10.6 LDFLAGS=-L/usr
./perl Makefile.PL PREFIX='/usr/local/Cellar/git/1.8.1.1' INSTALL_BASE='' --localedir='/usr/local/Cellar/git/1.8.1.1/share/locale'
make[1]: ./perl: No such file or directory
make[1]: *** [perl.mak] Error 1
make: *** [perl/perl.mak] Error 2
make: *** Waiting for unfinished jobs....

READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting

These open issues may also help:
    https://github.com/mxcl/homebrew/issues/11481
    https://github.com/mxcl/homebrew/issues/16194
    https://github.com/mxcl/homebrew/issues/16876
</code></pre>

<p><code>brew doctor</code> reported that everything was okay, and those GitHub issues weren&rsquo;t relevant. It was obvious from the output what was happening: <code>./perl</code> was failing. The question was, <em>why</em> ?</p>

<p>A clue came when I realized that it wasn&rsquo;t just calling <code>perl</code>, but rather a local copy of it.
Digging through the <a href="https://github.com/mxcl/homebrew/commits/master/Library/Formula/git.rb">homebrew formula</a> I came across <a href="https://github.com/mxcl/homebrew/blob/c5bf6f2313c415ed662f7922a24b86440e288c66/Library/Formula/git.rb#L35">this</a>:</p>

<pre><code># Clean XCode 4.x installs don't include Perl MakeMaker
ENV['NO_PERL_MAKEMAKER'] = '1' if MacOS.version &gt;= :lion
</code></pre>

<p>While I didn&rsquo;t have Lion, I <em>did</em> have an older version of XCode, so I gave it a shot:</p>

<pre><code>$ NO_PERL_MAKEMAKER=1 brew install git
</code></pre>

<p>and, lo, it worked perfectly.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Multiple Heroku Accounts and git]]></title>
    <link href="http://rylnd.github.com/blog/2012/04/27/multiple-heroku-accounts-and-git/"/>
    <updated>2012-04-27T16:49:00-05:00</updated>
    <id>http://rylnd.github.com/blog/2012/04/27/multiple-heroku-accounts-and-git</id>
    <content type="html"><![CDATA[<p>I was recently trying to deploy a heroku instance for some testing. I hadn&rsquo;t done any work on heroku in a while, and ended up getting stuck on a credentials issue.</p>

<p>While I had successfully done a <code>$ gem install heroku &amp;&amp; heroku create --stack cedar</code>, I got the following error when trying to do a <code>$ git push heroku master</code> to get things up and running:</p>

<pre><code>!  Your key with fingerprint 09:84:27:65:48:de:b4:48:fe:64:25:d8:dd:55:d8:db
is not authorized to access evening-snow-7878.

fatal: The remote end hung up unexpectedly
</code></pre>

<p>Hmm.  That looked like an ssh issue to me. A quick <code>$ ssh-keygen -l</code> of a few of my keys told me that it was using the &lsquo;wrong one,&rsquo; which was my default ssh key.</p>

<p>Looking at <code>$ heroku keys</code> didn&rsquo;t help; it was using the correct key. So the issue was with my ssh config, not the heroku gem or its configuration.</p>

<p>I quickly tried to add an entry to my <code>~/.ssh/config</code> file, along the lines of</p>

<pre><code>Host heroku.com
  IdentityFile ~/.ssh/the_key_you_want
</code></pre>

<p>But I still got the same error: it was still using the wrong key. I did some quick googling and couldn&rsquo;t find a good answer.  I eventually stumbled on this <a href="https://github.com/ddollar/heroku-accounts">excellent heroku plugin</a> that does exactly what I was looking for.</p>

<p>However, if you aren&rsquo;t using many accounts, and don&rsquo;t want to type a command in each terminal session, here&rsquo;s what it&rsquo;s doing under the covers (and what I ended up doing):</p>

<ol>
<li><p>Add something like the following to your <code>~/.ssh/config</code> file:</p>

<pre><code>Host heroku.app_name
  HostName heroku.com
  IdentityFile ~/.ssh/the_key_you_want
  IdentitiesOnly yes
</code></pre></li>
<li><p>Add a remote to your repo using that host:</p>

<pre><code>$ git remote add heroku git@heroku.app_name:app_name.git
</code></pre></li>
</ol>


<p>That should be it. Enjoy!</p>
]]></content>
  </entry>
  
</feed>
